{"remainingRequest":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\ChangePassword.vue","mtime":1616022990791},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6ICdDaGFuZ2VQYXNzd29yZCcsCglkYXRhKCl7CgkJcmV0dXJuIHsKCQkJdXNlcjogewoJCQkJJ29sZF9wYXNzd29yZCc6ICcnLAoJCQkJJ25ld19wYXNzd29yZCc6ICcnLAoJCQl9LAoJCQltZXNzYWdlOiAnJywKCQkJYWxlcnQ6IHRoaXMuJHN0b3JlLnN0YXRlLmFsZXJ0TWVzc2FnZSwKCQkJcnVsZXM6IFsKCQkgICAgICAgIHZhbHVlID0+ICEhdmFsdWUgfHwgJ1JlcXVpcmVkLicsCgkJICAgIF0KCQl9Cgl9LAoJbWV0aG9kczogewoJCWFzeW5jIGNoYW5nZVBhc3N3b3JkKCl7CiAgICAgIGxldCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICBjb25zb2xlLmxvZyh0b2tlbikKCQkJbGV0IHJlcXVlc3RPcHRpb25zID0gewoJCQkJbWV0aG9kOiAiUFVUIiwKICAgICAgICAvLyBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJywKICAgICAgICAvLyBjcmVkZW50aWFscyA6ICdpbmNsdWRlJywKCQkJCWhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJKV1QiICsgdG9rZW4sCgkJCQl9LAoJCQkJYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyKQoJCQl9CgoJCQlsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FwaS9jaGFuZ2UtcGFzc3dvcmQvJywgcmVxdWVzdE9wdGlvbnMpOwoJCQljb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmhlYWRlcnMpCiAgICAgIGlmIChhd2FpdCByZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmFsZXJ0TWVzc2FnZSA9ICJZb3UgaGF2ZSBjaGFuZ2UgeW91ciBwYXNzd29yZCBzdWNjZXNzZnVsbHkhIjsKCQkJCWxldCBsb2dJbkJ0biAJCT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luJyksCgkJCQkJc2lnblVwICAgCQkJPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2lnbnVwJyksCgkJCQkJbG9nT3V0QnRuIAkJPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9nb3V0Jyk7CgkJCQlsb2dJbkJ0bi5zdHlsZS5kaXNwbGF5IAkJPSAnbm9uZSc7CgkJCQlzaWduVXAuc3R5bGUuZGlzcGxheSAJCSAgPSAnbm9uZSc7CgkJCQlsb2dPdXRCdG4uc3R5bGUuZGlzcGxheSAJPSAnYmxvY2snOwoJCQkJdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKCQkJfSBlbHNlIGlmIChhd2FpdCByZXNwb25zZS5zdGF0dXMgPT09IDQwMCkgewoJCQkJdGhpcy5tZXNzYWdlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwoJCQkJdGhpcy51c2VyLm9sZF9wYXNzd29yZCA9ICcnOwoJCQkJdGhpcy51c2VyLm5ld19wYXNzd29yZCA9ICcnOwoJCQl9CgkJfQoJfSwKfQo="},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangePassword.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div class=\"login\">\n\t    <h1>Change your password</h1>\n\t    <p>Using the following form:</p>\n\t    <v-alert v-if=\"message\" type=\"error\">\n\t      {{ message.detail }}\n\t    </v-alert>\n\t    <v-alert v-if=\"alert\" type=\"success\">\n        {{ alert }}\n\t    </v-alert>\n\t    <form @submit.prevent=\"changePassword\">\n\t        <v-text-field\n\t          type=\"password\"\n\t          label=\"Old password\"\n\t          :rules=\"rules\"\n\t          hide-details=\"auto\"\n\t          v-model=\"user.old_password\"\n\t          required\n\t        ></v-text-field>\n\t        <v-text-field\n\t          type=\"password\"\n\t          label=\"New password\"\n\t          :rules=\"rules\"\n\t          hide-details=\"auto\"\n\t          v-model=\"user.new_password\"\n\t          required\n\t        ></v-text-field>\n\t        <v-btn class=\"btn\" type=\"submit\" depressed color=\"primary\">Change password</v-btn>\n\t    </form>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'ChangePassword',\n\tdata(){\n\t\treturn {\n\t\t\tuser: {\n\t\t\t\t'old_password': '',\n\t\t\t\t'new_password': '',\n\t\t\t},\n\t\t\tmessage: '',\n\t\t\talert: this.$store.state.alertMessage,\n\t\t\trules: [\n\t\t        value => !!value || 'Required.',\n\t\t    ]\n\t\t}\n\t},\n\tmethods: {\n\t\tasync changePassword(){\n      let token = localStorage.getItem('token');\n      console.log(token)\n\t\t\tlet requestOptions = {\n\t\t\t\tmethod: \"PUT\",\n        // credentials: 'same-origin',\n        // credentials : 'include',\n\t\t\t\theaders: {\n          'Content-Type': 'application/json',\n          \"Authorization\": \"JWT\" + token,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(this.user)\n\t\t\t}\n\n\t\t\tlet response = await fetch('http://127.0.0.1:8000/api/change-password/', requestOptions);\n\t\t\tconsole.log(response);\n      console.log(response.headers)\n      if (await response.status === 200) {\n        this.$store.state.alertMessage = \"You have change your password successfully!\";\n\t\t\t\tlet logInBtn \t\t= document.querySelector('#login'),\n\t\t\t\t\tsignUp   \t\t\t= document.querySelector('#signup'),\n\t\t\t\t\tlogOutBtn \t\t= document.querySelector('#logout');\n\t\t\t\tlogInBtn.style.display \t\t= 'none';\n\t\t\t\tsignUp.style.display \t\t  = 'none';\n\t\t\t\tlogOutBtn.style.display \t= 'block';\n\t\t\t\tthis.$router.push('/');\n\t\t\t} else if (await response.status === 400) {\n\t\t\t\tthis.message = await response.json();\n\t\t\t\tthis.user.old_password = '';\n\t\t\t\tthis.user.new_password = '';\n\t\t\t}\n\t\t}\n\t},\n}\n</script>\n\n<style>\n  .login{\n    width: 600px;\n    margin: 0 auto;\n    padding: 50px 0;\n  }\n\n  .btn{\n    margin: 10px 0;\n  }\n</style>"]}]}