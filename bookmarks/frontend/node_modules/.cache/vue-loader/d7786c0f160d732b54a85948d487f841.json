{"remainingRequest":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\Register.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\Register.vue","mtime":1615911185013},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJlZ2lzdGVyewogIHdpZHRoOiA2MDBweDsKICBtYXJnaW46IDAgYXV0bzsKICBwYWRkaW5nOiA1MHB4IDA7Cn0KCi5idG57CiAgbWFyZ2luOiAxMHB4IDA7Cn0KCiNsb2dvdXR7CiAgZGlzcGxheTogbm9uZTsKfQo="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"register\">\r\n    <h1>Create an account</h1>\r\n    <p>Please, sign up using the following form:</p>\r\n    <v-alert v-for=\"[msg], i in message\" type=\"error\" :key=\"i\">\r\n      {{ msg }}\r\n    </v-alert>\r\n    <form @submit.prevent=\"createUser\">\r\n        <v-text-field\r\n          label=\"Username\"\r\n          :rules=\"rules\"\r\n          hide-details=\"auto\"\r\n          required\r\n          v-model=\"user.username\"\r\n        ></v-text-field>\r\n        <v-text-field\r\n          label=\"First name\"\r\n          :rules=\"rules\"\r\n          hide-details=\"auto\"\r\n          required\r\n          v-model=\"user.first_name\"\r\n        ></v-text-field>\r\n        <v-text-field\r\n          type=\"email\"\r\n          label=\"Email\"\r\n          :rules=\"rules\"\r\n          hide-details=\"auto\"\r\n          required\r\n          v-model=\"user.email\"\r\n        ></v-text-field>\r\n        <v-text-field\r\n          type=\"password\"\r\n          label=\"Password\"\r\n          :rules=\"rules\"\r\n          hide-details=\"auto\"\r\n          required\r\n          v-model=\"user.password\"\r\n        ></v-text-field>\r\n        <v-text-field\r\n          type=\"password\"\r\n          label=\"Repeat password\"\r\n          :rules=\"rules\"\r\n          hide-details=\"auto\"\r\n          required\r\n          v-model=\"user.password2\"\r\n        ></v-text-field>\r\n        <v-btn class=\"btn\" type=\"submit\" depressed color=\"primary\">Sign up</v-btn>\r\n    </form>\r\n    <p>Already a member? <router-link to=\"login\">Log in</router-link></p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'Register',\r\n  data(){\r\n    return {\r\n      user: {\r\n        'username': '',\r\n        'first_name': '',\r\n        'email': '',\r\n        'password': '',\r\n        'password2': ''\r\n      },\r\n      rules: [\r\n        value => !!value || 'Required.',\r\n        value => (value && value.length >= 3) || 'Min 3 characters',\r\n      ],\r\n      message: ''\r\n    }\r\n  },\r\n  methods: {\r\n    async createUser(){\r\n      let requestOptions = {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(this.user)\r\n      }\r\n      let response = await fetch('http://localhost:8000/api/register/', requestOptions);\r\n      if(await response.status === 201){\r\n        this.$store.state.alertMessage = \"You have signed up successfully! Please, log in!\";\r\n        this.$router.push('/login');\r\n      }else if(await response.status === 400){\r\n        this.message = await response.json();\r\n        if(this.message.username && this.message.email){\r\n          this.user.username = '';\r\n          this.user.email = '';\r\n        }else if(this.message.email){\r\n          this.user.email = '';\r\n        }else if(this.message.username){\r\n          this.user.username = '';\r\n        }else{\r\n          this.user.password = '';\r\n          this.user.password2 = '';\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .register{\r\n    width: 600px;\r\n    margin: 0 auto;\r\n    padding: 50px 0;\r\n  }\r\n\r\n  .btn{\r\n    margin: 10px 0;\r\n  }\r\n\r\n  #logout{\r\n    display: none;\r\n  }\r\n</style>"]}]}