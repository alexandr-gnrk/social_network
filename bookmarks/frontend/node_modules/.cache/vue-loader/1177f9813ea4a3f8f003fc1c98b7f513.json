{"remainingRequest":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\Login.vue","mtime":1615911185012},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdHsNCgluYW1lOiAnTG9naW4nLA0KCWRhdGEoKXsNCgkJcmV0dXJuIHsNCgkJCXVzZXI6IHsNCgkJCQkndXNlcm5hbWUnOiAnJywNCgkJCQkncGFzc3dvcmQnOiAnJw0KCQkJfSwNCgkJCW1lc3NhZ2U6ICcnLA0KCQkJYWxlcnQ6IHRoaXMuJHN0b3JlLnN0YXRlLmFsZXJ0TWVzc2FnZSwNCgkJCXJ1bGVzOiBbDQoJCSAgICAgICAgdmFsdWUgPT4gISF2YWx1ZSB8fCAnUmVxdWlyZWQuJywNCgkJICAgICAgICB2YWx1ZSA9PiAodmFsdWUgJiYgdmFsdWUubGVuZ3RoID49IDMpIHx8ICdNaW4gMyBjaGFyYWN0ZXJzJywNCgkJICAgIF0NCgkJfQ0KCX0sDQoJY3JlYXRlZCgpew0KCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQoJCQl0aGlzLiRzdG9yZS5zdGF0ZS5hbGVydE1lc3NhZ2UgPSAnJzsNCgkJfSwgNDAwMCk7DQoJfSwNCgltZXRob2RzOiB7DQoJCWFzeW5jIGxvZ2luVXNlcigpew0KCQkJbGV0IHJlcXVlc3RPcHRpb25zID0gew0KCQkJCW1ldGhvZDogIlBPU1QiLA0KCQkJCWhlYWRlcnM6IHsNCgkJCQkJJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJw0KCQkJCX0sDQoJCQkJYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyKQ0KCQkJfQ0KDQoJCQlsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9hdXRoLycsIHJlcXVlc3RPcHRpb25zKTsNCgkJCWlmKGF3YWl0IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKXsNCgkJCQl0aGlzLm1lc3NhZ2UgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdGhpcy5tZXNzYWdlLnRva2VuKTsNCgkJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIHRoaXMubWVzc2FnZS51c2VyKTsNCgkJCQlsZXQgbG9nSW5CdG4gCQk9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbicpLA0KCQkJCQlzaWduVXAgCQkJPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2lnbnVwJyksDQoJCQkJCWxvZ091dEJ0biAJCT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ291dCcpOw0KCQkJCWxvZ0luQnRuLnN0eWxlLmRpc3BsYXkgCQk9ICdub25lJzsNCgkJCQlzaWduVXAuc3R5bGUuZGlzcGxheSAJCT0gJ25vbmUnOw0KCQkJCWxvZ091dEJ0bi5zdHlsZS5kaXNwbGF5IAk9ICdibG9jayc7DQoJCQkJdGhpcy4kcm91dGVyLnB1c2goJy8nKTsNCgkJCX1lbHNlIGlmKGF3YWl0IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKXsNCgkJCQl0aGlzLm1lc3NhZ2UgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoJCQkJdGhpcy51c2VyLnVzZXJuYW1lID0gJyc7DQoJCQkJdGhpcy51c2VyLnBhc3N3b3JkID0gJyc7DQoJCQl9DQoJCX0NCgl9DQp9DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"login\">\r\n\t    <h1>Log in</h1>\r\n\t    <p>Please, log in using the following form:</p>\r\n\t    <v-alert v-if=\"message\" type=\"error\">\r\n\t      {{ message.detail }}\r\n\t    </v-alert>\r\n\t    <v-alert v-if=\"alert\" type=\"success\">\r\n\t        {{ alert }}\r\n\t    </v-alert>\r\n\t    <form @submit.prevent=\"loginUser\">\r\n\t        <v-text-field\r\n\t          label=\"Username or email\"\r\n\t          :rules=\"rules\"\r\n\t          hide-details=\"auto\"\r\n\t          v-model=\"user.username\"\r\n\t          required\r\n\t        ></v-text-field>\r\n\t        <v-text-field\r\n\t          type=\"password\"\r\n\t          label=\"Password\"\r\n\t          :rules=\"rules\"\r\n\t          hide-details=\"auto\"\r\n\t          v-model=\"user.password\"\r\n\t          required\r\n\t        ></v-text-field>\r\n\t        <v-btn class=\"btn\" type=\"submit\" depressed color=\"primary\">Log in</v-btn>\r\n\t    </form>\r\n\t    <p>Are you a member yet? <router-link to=\"register\">Sign up</router-link></p>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default{\r\n\tname: 'Login',\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tuser: {\r\n\t\t\t\t'username': '',\r\n\t\t\t\t'password': ''\r\n\t\t\t},\r\n\t\t\tmessage: '',\r\n\t\t\talert: this.$store.state.alertMessage,\r\n\t\t\trules: [\r\n\t\t        value => !!value || 'Required.',\r\n\t\t        value => (value && value.length >= 3) || 'Min 3 characters',\r\n\t\t    ]\r\n\t\t}\r\n\t},\r\n\tcreated(){\r\n\t\tsetTimeout(function(){\r\n\t\t\tthis.$store.state.alertMessage = '';\r\n\t\t}, 4000);\r\n\t},\r\n\tmethods: {\r\n\t\tasync loginUser(){\r\n\t\t\tlet requestOptions = {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(this.user)\r\n\t\t\t}\r\n\r\n\t\t\tlet response = await fetch('http://localhost:8000/api/auth/', requestOptions);\r\n\t\t\tif(await response.status === 200){\r\n\t\t\t\tthis.message = await response.json();\r\n\t\t\t\tlocalStorage.setItem('token', this.message.token);\r\n\t\t\t\tlocalStorage.setItem('user', this.message.user);\r\n\t\t\t\tlet logInBtn \t\t= document.querySelector('#login'),\r\n\t\t\t\t\tsignUp \t\t\t= document.querySelector('#signup'),\r\n\t\t\t\t\tlogOutBtn \t\t= document.querySelector('#logout');\r\n\t\t\t\tlogInBtn.style.display \t\t= 'none';\r\n\t\t\t\tsignUp.style.display \t\t= 'none';\r\n\t\t\t\tlogOutBtn.style.display \t= 'block';\r\n\t\t\t\tthis.$router.push('/');\r\n\t\t\t}else if(await response.status === 400){\r\n\t\t\t\tthis.message = await response.json();\r\n\t\t\t\tthis.user.username = '';\r\n\t\t\t\tthis.user.password = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n  .login{\r\n    width: 600px;\r\n    margin: 0 auto;\r\n    padding: 50px 0;\r\n  }\r\n\r\n  .btn{\r\n    margin: 10px 0;\r\n  }\r\n</style>"]}]}