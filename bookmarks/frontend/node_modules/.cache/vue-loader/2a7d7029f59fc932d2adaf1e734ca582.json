{"remainingRequest":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\Login.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\Login.vue","mtime":1615911185012},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmxvZ2luewogIHdpZHRoOiA2MDBweDsKICBtYXJnaW46IDAgYXV0bzsKICBwYWRkaW5nOiA1MHB4IDA7Cn0KCi5idG57CiAgbWFyZ2luOiAxMHB4IDA7Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"login\">\r\n\t    <h1>Log in</h1>\r\n\t    <p>Please, log in using the following form:</p>\r\n\t    <v-alert v-if=\"message\" type=\"error\">\r\n\t      {{ message.detail }}\r\n\t    </v-alert>\r\n\t    <v-alert v-if=\"alert\" type=\"success\">\r\n\t        {{ alert }}\r\n\t    </v-alert>\r\n\t    <form @submit.prevent=\"loginUser\">\r\n\t        <v-text-field\r\n\t          label=\"Username or email\"\r\n\t          :rules=\"rules\"\r\n\t          hide-details=\"auto\"\r\n\t          v-model=\"user.username\"\r\n\t          required\r\n\t        ></v-text-field>\r\n\t        <v-text-field\r\n\t          type=\"password\"\r\n\t          label=\"Password\"\r\n\t          :rules=\"rules\"\r\n\t          hide-details=\"auto\"\r\n\t          v-model=\"user.password\"\r\n\t          required\r\n\t        ></v-text-field>\r\n\t        <v-btn class=\"btn\" type=\"submit\" depressed color=\"primary\">Log in</v-btn>\r\n\t    </form>\r\n\t    <p>Are you a member yet? <router-link to=\"register\">Sign up</router-link></p>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default{\r\n\tname: 'Login',\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tuser: {\r\n\t\t\t\t'username': '',\r\n\t\t\t\t'password': ''\r\n\t\t\t},\r\n\t\t\tmessage: '',\r\n\t\t\talert: this.$store.state.alertMessage,\r\n\t\t\trules: [\r\n\t\t        value => !!value || 'Required.',\r\n\t\t        value => (value && value.length >= 3) || 'Min 3 characters',\r\n\t\t    ]\r\n\t\t}\r\n\t},\r\n\tcreated(){\r\n\t\tsetTimeout(function(){\r\n\t\t\tthis.$store.state.alertMessage = '';\r\n\t\t}, 4000);\r\n\t},\r\n\tmethods: {\r\n\t\tasync loginUser(){\r\n\t\t\tlet requestOptions = {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(this.user)\r\n\t\t\t}\r\n\r\n\t\t\tlet response = await fetch('http://localhost:8000/api/auth/', requestOptions);\r\n\t\t\tif(await response.status === 200){\r\n\t\t\t\tthis.message = await response.json();\r\n\t\t\t\tlocalStorage.setItem('token', this.message.token);\r\n\t\t\t\tlocalStorage.setItem('user', this.message.user);\r\n\t\t\t\tlet logInBtn \t\t= document.querySelector('#login'),\r\n\t\t\t\t\tsignUp \t\t\t= document.querySelector('#signup'),\r\n\t\t\t\t\tlogOutBtn \t\t= document.querySelector('#logout');\r\n\t\t\t\tlogInBtn.style.display \t\t= 'none';\r\n\t\t\t\tsignUp.style.display \t\t= 'none';\r\n\t\t\t\tlogOutBtn.style.display \t= 'block';\r\n\t\t\t\tthis.$router.push('/');\r\n\t\t\t}else if(await response.status === 400){\r\n\t\t\t\tthis.message = await response.json();\r\n\t\t\t\tthis.user.username = '';\r\n\t\t\t\tthis.user.password = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n  .login{\r\n    width: 600px;\r\n    margin: 0 auto;\r\n    padding: 50px 0;\r\n  }\r\n\r\n  .btn{\r\n    margin: 10px 0;\r\n  }\r\n</style>"]}]}