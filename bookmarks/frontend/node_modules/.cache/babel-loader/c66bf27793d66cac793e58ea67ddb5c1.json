{"remainingRequest":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\src\\views\\Login.vue","mtime":1615911185012},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vitalii\\code\\social_network\\bookmarks\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3ZpdGFsaWkvY29kZS9zb2NpYWxfbmV0d29yay9ib29rbWFya3MvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvZ2luJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogewogICAgICAgICd1c2VybmFtZSc6ICcnLAogICAgICAgICdwYXNzd29yZCc6ICcnCiAgICAgIH0sCiAgICAgIG1lc3NhZ2U6ICcnLAogICAgICBhbGVydDogdGhpcy4kc3RvcmUuc3RhdGUuYWxlcnRNZXNzYWdlLAogICAgICBydWxlczogW2Z1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHJldHVybiAhIXZhbHVlIHx8ICdSZXF1aXJlZC4nOwogICAgICB9LCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUubGVuZ3RoID49IDMgfHwgJ01pbiAzIGNoYXJhY3RlcnMnOwogICAgICB9XQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYWxlcnRNZXNzYWdlID0gJyc7CiAgICB9LCA0MDAwKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luVXNlcjogZnVuY3Rpb24gbG9naW5Vc2VyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVxdWVzdE9wdGlvbnMsIHJlc3BvbnNlLCBsb2dJbkJ0biwgc2lnblVwLCBsb2dPdXRCdG47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVxdWVzdE9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShfdGhpcy51c2VyKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2F1dGgvJywgcmVxdWVzdE9wdGlvbnMpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXM7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShfY29udGV4dC50MCA9PT0gMjAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIF90aGlzLm1lc3NhZ2UudG9rZW4pOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBfdGhpcy5tZXNzYWdlLnVzZXIpOwogICAgICAgICAgICAgICAgbG9nSW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4nKSwgc2lnblVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpZ251cCcpLCBsb2dPdXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9nb3V0Jyk7CiAgICAgICAgICAgICAgICBsb2dJbkJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgc2lnblVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBsb2dPdXRCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CgogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvJyk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKF9jb250ZXh0LnQxID09PSA0MDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIF90aGlzLm1lc3NhZ2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMudXNlci51c2VybmFtZSA9ICcnOwogICAgICAgICAgICAgICAgX3RoaXMudXNlci5wYXNzd29yZCA9ICcnOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,oBAAA,EADA;AAEA,oBAAA;AAFA,OADA;AAKA,MAAA,OAAA,EAAA,EALA;AAMA,MAAA,KAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,YANA;AAOA,MAAA,KAAA,EAAA,CACA,UAAA,KAAA;AAAA,eAAA,CAAA,CAAA,KAAA,IAAA,WAAA;AAAA,OADA,EAEA,UAAA,KAAA;AAAA,eAAA,KAAA,IAAA,KAAA,CAAA,MAAA,IAAA,CAAA,IAAA,kBAAA;AAAA,OAFA;AAPA,KAAA;AAYA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,IAAA,UAAA,CAAA,YAAA;AACA,WAAA,MAAA,CAAA,KAAA,CAAA,YAAA,GAAA,EAAA;AACA,KAFA,EAEA,IAFA,CAAA;AAGA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,cADA,GACA;AACA,kBAAA,MAAA,EAAA,MADA;AAEA,kBAAA,OAAA,EAAA;AACA,oCAAA;AADA,mBAFA;AAKA,kBAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA;AALA,iBADA;AAAA;AAAA,uBASA,KAAA,CAAA,iCAAA,EAAA,cAAA,CATA;;AAAA;AASA,gBAAA,QATA;AAAA;AAAA,uBAUA,QAAA,CAAA,MAVA;;AAAA;AAAA;;AAAA,sCAUA,GAVA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAWA,QAAA,CAAA,IAAA,EAXA;;AAAA;AAWA,gBAAA,KAAA,CAAA,OAXA;AAYA,gBAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,KAAA,CAAA,OAAA,CAAA,KAAA;AACA,gBAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,KAAA,CAAA,OAAA,CAAA,IAAA;AACA,gBAAA,QAdA,GAcA,QAAA,CAAA,aAAA,CAAA,QAAA,CAdA,EAeA,MAfA,GAeA,QAAA,CAAA,aAAA,CAAA,SAAA,CAfA,EAgBA,SAhBA,GAgBA,QAAA,CAAA,aAAA,CAAA,SAAA,CAhBA;AAiBA,gBAAA,QAAA,CAAA,KAAA,CAAA,OAAA,GAAA,MAAA;AACA,gBAAA,MAAA,CAAA,KAAA,CAAA,OAAA,GAAA,MAAA;AACA,gBAAA,SAAA,CAAA,KAAA,CAAA,OAAA,GAAA,OAAA;;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;;AApBA;AAAA;;AAAA;AAAA;AAAA,uBAqBA,QAAA,CAAA,MArBA;;AAAA;AAAA;;AAAA,sCAqBA,GArBA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAsBA,QAAA,CAAA,IAAA,EAtBA;;AAAA;AAsBA,gBAAA,KAAA,CAAA,OAtBA;AAuBA,gBAAA,KAAA,CAAA,IAAA,CAAA,QAAA,GAAA,EAAA;AACA,gBAAA,KAAA,CAAA,IAAA,CAAA,QAAA,GAAA,EAAA;;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0BA;AA3BA;AArBA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"login\">\r\n\t    <h1>Log in</h1>\r\n\t    <p>Please, log in using the following form:</p>\r\n\t    <v-alert v-if=\"message\" type=\"error\">\r\n\t      {{ message.detail }}\r\n\t    </v-alert>\r\n\t    <v-alert v-if=\"alert\" type=\"success\">\r\n\t        {{ alert }}\r\n\t    </v-alert>\r\n\t    <form @submit.prevent=\"loginUser\">\r\n\t        <v-text-field\r\n\t          label=\"Username or email\"\r\n\t          :rules=\"rules\"\r\n\t          hide-details=\"auto\"\r\n\t          v-model=\"user.username\"\r\n\t          required\r\n\t        ></v-text-field>\r\n\t        <v-text-field\r\n\t          type=\"password\"\r\n\t          label=\"Password\"\r\n\t          :rules=\"rules\"\r\n\t          hide-details=\"auto\"\r\n\t          v-model=\"user.password\"\r\n\t          required\r\n\t        ></v-text-field>\r\n\t        <v-btn class=\"btn\" type=\"submit\" depressed color=\"primary\">Log in</v-btn>\r\n\t    </form>\r\n\t    <p>Are you a member yet? <router-link to=\"register\">Sign up</router-link></p>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default{\r\n\tname: 'Login',\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tuser: {\r\n\t\t\t\t'username': '',\r\n\t\t\t\t'password': ''\r\n\t\t\t},\r\n\t\t\tmessage: '',\r\n\t\t\talert: this.$store.state.alertMessage,\r\n\t\t\trules: [\r\n\t\t        value => !!value || 'Required.',\r\n\t\t        value => (value && value.length >= 3) || 'Min 3 characters',\r\n\t\t    ]\r\n\t\t}\r\n\t},\r\n\tcreated(){\r\n\t\tsetTimeout(function(){\r\n\t\t\tthis.$store.state.alertMessage = '';\r\n\t\t}, 4000);\r\n\t},\r\n\tmethods: {\r\n\t\tasync loginUser(){\r\n\t\t\tlet requestOptions = {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(this.user)\r\n\t\t\t}\r\n\r\n\t\t\tlet response = await fetch('http://localhost:8000/api/auth/', requestOptions);\r\n\t\t\tif(await response.status === 200){\r\n\t\t\t\tthis.message = await response.json();\r\n\t\t\t\tlocalStorage.setItem('token', this.message.token);\r\n\t\t\t\tlocalStorage.setItem('user', this.message.user);\r\n\t\t\t\tlet logInBtn \t\t= document.querySelector('#login'),\r\n\t\t\t\t\tsignUp \t\t\t= document.querySelector('#signup'),\r\n\t\t\t\t\tlogOutBtn \t\t= document.querySelector('#logout');\r\n\t\t\t\tlogInBtn.style.display \t\t= 'none';\r\n\t\t\t\tsignUp.style.display \t\t= 'none';\r\n\t\t\t\tlogOutBtn.style.display \t= 'block';\r\n\t\t\t\tthis.$router.push('/');\r\n\t\t\t}else if(await response.status === 400){\r\n\t\t\t\tthis.message = await response.json();\r\n\t\t\t\tthis.user.username = '';\r\n\t\t\t\tthis.user.password = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n  .login{\r\n    width: 600px;\r\n    margin: 0 auto;\r\n    padding: 50px 0;\r\n  }\r\n\r\n  .btn{\r\n    margin: 10px 0;\r\n  }\r\n</style>"],"sourceRoot":"src/views"}]}